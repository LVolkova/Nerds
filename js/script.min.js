const popupLink=document.querySelector(".map-button"),popup=document.querySelector(".feedback"),popupClose=document.querySelector(".feedback-close"),popupForm=popup.querySelector(".feedback-form"),userName=popup.querySelector(".name"),userEmail=popup.querySelector(".email"),userComment=popup.querySelector(".comment");let isStorageSupport=!0,nameStorage="",emailStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popupLink.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-feedback-show"),nameStorage&&emailStorage?(userName.value=nameStorage,userEmail.value=emailStorage,userComment.focus()):userName.focus()}),popupClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-feedback-show")}),popupForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userComment.value?isStorageSupport&&(localStorage.setItem("name",userName.value),localStorage.setItem("email",userEmail.value)):e.preventDefault()}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-feedback-show")&&(e.preventDefault(),popup.classList.remove("modal-feedback-show"))});